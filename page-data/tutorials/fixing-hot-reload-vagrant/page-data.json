{"componentChunkName":"component---src-templates-blog-page-js","path":"/tutorials/fixing-hot-reload-vagrant/","result":{"data":{"markdownRemark":{"id":"11b4de89-d912-562c-bcfc-59baaf80a33a","html":"<p>One of the common issues that I've run into virtualizing my development environments is having to restart my server manually.</p>\n<p>Whenever I developed locally, everything was fast, and changes appeared on first refresh. But when I used a VM, the frustration of restarting the server killed a lot of my productivity.</p>\n<h2>The Issue</h2>\n<p>Many of the hot reloads rely on detecting when the file has changed in your directory. Usually, we have something that watches the directory, and listens for a change. </p>\n<p>Whenever a file is changed, the system kernel emits a notification letting a program know that something changed. In Linux systems, we have <code>inotify</code>, on OSX, it's <code>fsevents</code>. </p>\n<p>Since we're using a virtual machine, our program is only listening to notifications emitted on the virtual machine.</p>\n<h2>Solution 1: Forward File Change Events</h2>\n<p>A recommended solution is to add a vagrant plugin to take care of forwarding file events to the VM. </p>\n<p>Currently we're using <a href=\"https://github.com/adrienkohlbecker/vagrant-fsnotify\">vagrant-fsnotify</a> to forward events.</p>\n<p>After installing the plugin we.</p>\n<ol>\n<li>\n<p>add the fsnotify:true to our synced file directory.</p>\n<pre><code class=\"language-ruby\">config.vm.synced_folder \".\", \"/vagrant\", fsnotify: true\n</code></pre>\n</li>\n<li>Restart the machine</li>\n<li>\n<p>Start <code>vagrant fsnotify</code> in a separate tab.</p>\n<pre><code class=\"language-bash\">vagrant fsnotify\n</code></pre>\n</li>\n</ol>\n<h2>Solution 2: Polling</h2>\n<p>An older recommendation is to switch to <em>polling</em>, which detects changes to the modification date occasionally. This was Ruby on Rails' default detection method until version 4. </p>\n<p>This is a fallback in cases where file event updates aren't available. You can check your dev-server's start system options, and see if a polling option exists.</p>\n<p>I don't recommend this, since polling takes up more memory and CPU, but if inotify forwarding is unavailable:</p>\n<p>In this <a href=\"http://stackoverflow.com/questions/33681004/webpack-dev-server-reload-doesnt-work-on-virtual-box/33699702\">stackoverflow post</a>, they enabled polling via <code>vagrant rsync-auto</code>.</p>","frontmatter":{"title":"Fixing Hot Reloads on Vagrant","date":"04 March, 2017"}}},"pageContext":{"slug":"/tutorials/fixing-hot-reload-vagrant/"}}}